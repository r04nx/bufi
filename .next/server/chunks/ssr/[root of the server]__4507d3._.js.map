{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,yNAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD,EAAE;AACtB"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA;AAHA;;;;;;AAKA,MAAM,iBAAiB,CAAA,GAAA,2OAAA,CAAA,MAAG,AAAD,EACvB,uOACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,oVAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,oSAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6XAAC;QACC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/app/%28dashboard%29/terminal.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Terminal = registerClientReference(\n    function() { throw new Error(\"Attempted to call Terminal() from the server but Terminal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(dashboard)/terminal.tsx <module evaluation>\",\n    \"Terminal\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,WAAW,CAAA,GAAA,oYAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,8DACA"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/app/%28dashboard%29/terminal.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Terminal = registerClientReference(\n    function() { throw new Error(\"Attempted to call Terminal() from the server but Terminal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(dashboard)/terminal.tsx\",\n    \"Terminal\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,WAAW,CAAA,GAAA,oYAAA,CAAA,0BAAuB,AAAD,EAC1C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,0CACA"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/app/%28dashboard%29/page.tsx"],"sourcesContent":["import { Button } from '@/components/ui/button';\nimport { ArrowRight, CreditCard, Database } from 'lucide-react';\nimport { Terminal } from './terminal';\nimport Image from 'next/image';\n\nexport default function HomePage() {\n  return (\n    <main>\n      <section className=\"py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"lg:grid lg:grid-cols-12 lg:gap-8\">\n            <div className=\"sm:text-center md:max-w-2xl md:mx-auto lg:col-span-6 lg:text-left\">\n              <div className=\"flex justify-center lg:justify-start mb-6\">\n                <Image\n                  src=\"/app/assets/logo-no-bg.png\"\n                  alt=\"Bufi Logo\"\n                  width={48}\n                  height={48}\n                  className=\"dark:hidden\"\n                />\n                <Image\n                  src=\"/app/assets/logo-white-bg.svg\"\n                  alt=\"Bufi Logo\"\n                  width={48}\n                  height={48}\n                  className=\"hidden dark:block\"\n                />\n              </div>\n              <h1 className=\"text-4xl font-bold text-gray-900 tracking-tight sm:text-5xl md:text-6xl\">\n                Build Your SaaS\n                <span className=\"block text-orange-500\">Faster Than Ever</span>\n              </h1>\n              <p className=\"mt-3 text-base text-gray-500 sm:mt-5 sm:text-xl lg:text-lg xl:text-xl\">\n                Launch your SaaS product in record time with our powerful,\n                ready-to-use template. Packed with modern technologies and\n                essential integrations.\n              </p>\n              <div className=\"mt-8 sm:max-w-lg sm:mx-auto sm:text-center lg:text-left lg:mx-0\">\n                <a\n                  href=\"https://vercel.com/templates/next.js/next-js-saas-starter\"\n                  target=\"_blank\"\n                >\n                  <Button className=\"bg-white hover:bg-gray-100 text-black border border-gray-200 rounded-full text-lg px-8 py-4 inline-flex items-center justify-center\">\n                    Deploy your own\n                    <ArrowRight className=\"ml-2 h-5 w-5\" />\n                  </Button>\n                </a>\n              </div>\n            </div>\n            <div className=\"mt-12 relative sm:max-w-lg sm:mx-auto lg:mt-0 lg:max-w-none lg:mx-0 lg:col-span-6 lg:flex lg:items-center\">\n              <Terminal />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-white w-full\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"lg:grid lg:grid-cols-3 lg:gap-8\">\n            <div>\n              <div className=\"flex items-center justify-center h-12 w-12 rounded-md bg-orange-500 text-white\">\n                <svg viewBox=\"0 0 24 24\" className=\"h-6 w-6\">\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"mt-5\">\n                <h2 className=\"text-lg font-medium text-gray-900\">\n                  Next.js and React\n                </h2>\n                <p className=\"mt-2 text-base text-gray-500\">\n                  Leverage the power of modern web technologies for optimal\n                  performance and developer experience.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"mt-10 lg:mt-0\">\n              <div className=\"flex items-center justify-center h-12 w-12 rounded-md bg-orange-500 text-white\">\n                <Database className=\"h-6 w-6\" />\n              </div>\n              <div className=\"mt-5\">\n                <h2 className=\"text-lg font-medium text-gray-900\">\n                  Postgres and Drizzle ORM\n                </h2>\n                <p className=\"mt-2 text-base text-gray-500\">\n                  Robust database solution with an intuitive ORM for efficient\n                  data management and scalability.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"mt-10 lg:mt-0\">\n              <div className=\"flex items-center justify-center h-12 w-12 rounded-md bg-orange-500 text-white\">\n                <CreditCard className=\"h-6 w-6\" />\n              </div>\n              <div className=\"mt-5\">\n                <h2 className=\"text-lg font-medium text-gray-900\">\n                  Stripe Integration\n                </h2>\n                <p className=\"mt-2 text-base text-gray-500\">\n                  Seamless payment processing and subscription management with\n                  industry-leading Stripe integration.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"lg:grid lg:grid-cols-2 lg:gap-8 lg:items-center\">\n            <div>\n              <h2 className=\"text-3xl font-bold text-gray-900 sm:text-4xl\">\n                Ready to launch your SaaS?\n              </h2>\n              <p className=\"mt-3 max-w-3xl text-lg text-gray-500\">\n                Our template provides everything you need to get your SaaS up\n                and running quickly. Don't waste time on boilerplate - focus on\n                what makes your product unique.\n              </p>\n            </div>\n            <div className=\"mt-8 lg:mt-0 flex justify-center lg:justify-end\">\n              <a\n                href=\"https://github.com/nextjs/saas-starter\"\n                target=\"_blank\"\n              >\n                <Button className=\"bg-white hover:bg-gray-100 text-black border border-gray-200 rounded-full text-xl px-12 py-6 inline-flex items-center justify-center\">\n                  View the code\n                  <ArrowRight className=\"ml-3 h-6 w-6\" />\n                </Button>\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;;;;;;AAIe,SAAS;IACtB,qBACE,6XAAC;;0BACC,6XAAC;gBAAQ,WAAU;0BACjB,cAAA,6XAAC;oBAAI,WAAU;8BACb,cAAA,6XAAC;wBAAI,WAAU;;0CACb,6XAAC;gCAAI,WAAU;;kDACb,6XAAC;wCAAI,WAAU;;0DACb,6XAAC,4QAAA,CAAA,UAAK;gDACJ,KAAI;gDACJ,KAAI;gDACJ,OAAO;gDACP,QAAQ;gDACR,WAAU;;;;;;0DAEZ,6XAAC,4QAAA,CAAA,UAAK;gDACJ,KAAI;gDACJ,KAAI;gDACJ,OAAO;gDACP,QAAQ;gDACR,WAAU;;;;;;;;;;;;kDAGd,6XAAC;wCAAG,WAAU;;4CAA0E;0DAEtF,6XAAC;gDAAK,WAAU;0DAAwB;;;;;;;;;;;;kDAE1C,6XAAC;wCAAE,WAAU;kDAAwE;;;;;;kDAKrF,6XAAC;wCAAI,WAAU;kDACb,cAAA,6XAAC;4CACC,MAAK;4CACL,QAAO;sDAEP,cAAA,6XAAC,2HAAA,CAAA,SAAM;gDAAC,WAAU;;oDAAsI;kEAEtJ,6XAAC,sSAAA,CAAA,aAAU;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAK9B,6XAAC;gCAAI,WAAU;0CACb,cAAA,6XAAC,iIAAA,CAAA,WAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;0BAMjB,6XAAC;gBAAQ,WAAU;0BACjB,cAAA,6XAAC;oBAAI,WAAU;8BACb,cAAA,6XAAC;wBAAI,WAAU;;0CACb,6XAAC;;kDACC,6XAAC;wCAAI,WAAU;kDACb,cAAA,6XAAC;4CAAI,SAAQ;4CAAY,WAAU;sDACjC,cAAA,6XAAC;gDACC,MAAK;gDACL,GAAE;;;;;;;;;;;;;;;;kDAIR,6XAAC;wCAAI,WAAU;;0DACb,6XAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAGlD,6XAAC;gDAAE,WAAU;0DAA+B;;;;;;;;;;;;;;;;;;0CAOhD,6XAAC;gCAAI,WAAU;;kDACb,6XAAC;wCAAI,WAAU;kDACb,cAAA,6XAAC,8RAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;;;;;;kDAEtB,6XAAC;wCAAI,WAAU;;0DACb,6XAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAGlD,6XAAC;gDAAE,WAAU;0DAA+B;;;;;;;;;;;;;;;;;;0CAOhD,6XAAC;gCAAI,WAAU;;kDACb,6XAAC;wCAAI,WAAU;kDACb,cAAA,6XAAC,sSAAA,CAAA,aAAU;4CAAC,WAAU;;;;;;;;;;;kDAExB,6XAAC;wCAAI,WAAU;;0DACb,6XAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAGlD,6XAAC;gDAAE,WAAU;0DAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAUtD,6XAAC;gBAAQ,WAAU;0BACjB,cAAA,6XAAC;oBAAI,WAAU;8BACb,cAAA,6XAAC;wBAAI,WAAU;;0CACb,6XAAC;;kDACC,6XAAC;wCAAG,WAAU;kDAA+C;;;;;;kDAG7D,6XAAC;wCAAE,WAAU;kDAAuC;;;;;;;;;;;;0CAMtD,6XAAC;gCAAI,WAAU;0CACb,cAAA,6XAAC;oCACC,MAAK;oCACL,QAAO;8CAEP,cAAA,6XAAC,2HAAA,CAAA,SAAM;wCAAC,WAAU;;4CAAuI;0DAEvJ,6XAAC,sSAAA,CAAA,aAAU;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASxC"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/lib/payments/stripe.ts"],"sourcesContent":["import Stripe from 'stripe';\nimport { redirect } from 'next/navigation';\nimport { Team } from '@/lib/db/schema';\nimport {\n  getTeamByStripeCustomerId,\n  getUser,\n  updateTeamSubscription\n} from '@/lib/db/queries';\n\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  apiVersion: '2025-01-27.acacia'\n});\n\nexport async function createCheckoutSession({\n  team,\n  priceId\n}: {\n  team: Team | null;\n  priceId: string;\n}) {\n  const user = await getUser();\n\n  if (!team || !user) {\n    redirect(`/sign-up?redirect=checkout&priceId=${priceId}`);\n  }\n\n  const session = await stripe.checkout.sessions.create({\n    payment_method_types: ['card'],\n    line_items: [\n      {\n        price: priceId,\n        quantity: 1\n      }\n    ],\n    mode: 'subscription',\n    success_url: `${process.env.BASE_URL}/api/stripe/checkout?session_id={CHECKOUT_SESSION_ID}`,\n    cancel_url: `${process.env.BASE_URL}/pricing`,\n    customer: team.stripeCustomerId || undefined,\n    client_reference_id: user.id.toString(),\n    allow_promotion_codes: true,\n    subscription_data: {\n      trial_period_days: 14\n    }\n  });\n\n  redirect(session.url!);\n}\n\nexport async function createCustomerPortalSession(team: Team) {\n  if (!team.stripeCustomerId || !team.stripeProductId) {\n    redirect('/pricing');\n  }\n\n  let configuration: Stripe.BillingPortal.Configuration;\n  const configurations = await stripe.billingPortal.configurations.list();\n\n  if (configurations.data.length > 0) {\n    configuration = configurations.data[0];\n  } else {\n    const product = await stripe.products.retrieve(team.stripeProductId);\n    if (!product.active) {\n      throw new Error(\"Team's product is not active in Stripe\");\n    }\n\n    const prices = await stripe.prices.list({\n      product: product.id,\n      active: true\n    });\n    if (prices.data.length === 0) {\n      throw new Error(\"No active prices found for the team's product\");\n    }\n\n    configuration = await stripe.billingPortal.configurations.create({\n      business_profile: {\n        headline: 'Manage your subscription'\n      },\n      features: {\n        subscription_update: {\n          enabled: true,\n          default_allowed_updates: ['price', 'quantity', 'promotion_code'],\n          proration_behavior: 'create_prorations',\n          products: [\n            {\n              product: product.id,\n              prices: prices.data.map((price) => price.id)\n            }\n          ]\n        },\n        subscription_cancel: {\n          enabled: true,\n          mode: 'at_period_end',\n          cancellation_reason: {\n            enabled: true,\n            options: [\n              'too_expensive',\n              'missing_features',\n              'switched_service',\n              'unused',\n              'other'\n            ]\n          }\n        }\n      }\n    });\n  }\n\n  return stripe.billingPortal.sessions.create({\n    customer: team.stripeCustomerId,\n    return_url: `${process.env.BASE_URL}/dashboard`,\n    configuration: configuration.id\n  });\n}\n\nexport async function handleSubscriptionChange(\n  subscription: Stripe.Subscription\n) {\n  const customerId = subscription.customer as string;\n  const subscriptionId = subscription.id;\n  const status = subscription.status;\n\n  const team = await getTeamByStripeCustomerId(customerId);\n\n  if (!team) {\n    console.error('Team not found for Stripe customer:', customerId);\n    return;\n  }\n\n  if (status === 'active' || status === 'trialing') {\n    const plan = subscription.items.data[0]?.plan;\n    await updateTeamSubscription(team.id, {\n      stripeSubscriptionId: subscriptionId,\n      stripeProductId: plan?.product as string,\n      planName: (plan?.product as Stripe.Product).name,\n      subscriptionStatus: status\n    });\n  } else if (status === 'canceled' || status === 'unpaid') {\n    await updateTeamSubscription(team.id, {\n      stripeSubscriptionId: null,\n      stripeProductId: null,\n      planName: null,\n      subscriptionStatus: status\n    });\n  }\n}\n\nexport async function getStripePrices() {\n  const prices = await stripe.prices.list({\n    expand: ['data.product'],\n    active: true,\n    type: 'recurring'\n  });\n\n  return prices.data.map((price) => ({\n    id: price.id,\n    productId:\n      typeof price.product === 'string' ? price.product : price.product.id,\n    unitAmount: price.unit_amount,\n    currency: price.currency,\n    interval: price.recurring?.interval,\n    trialPeriodDays: price.recurring?.trial_period_days\n  }));\n}\n\nexport async function getStripeProducts() {\n  const products = await stripe.products.list({\n    active: true,\n    expand: ['data.default_price']\n  });\n\n  return products.data.map((product) => ({\n    id: product.id,\n    name: product.name,\n    description: product.description,\n    defaultPriceId:\n      typeof product.default_price === 'string'\n        ? product.default_price\n        : product.default_price?.id\n  }));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 750, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/lib/auth/middleware.ts"],"sourcesContent":["import { z } from 'zod';\nimport { TeamDataWithMembers, User } from '@/lib/db/schema';\nimport { getTeamForUser, getUser } from '@/lib/db/queries';\nimport { redirect } from 'next/navigation';\n\nexport type ActionState = {\n  error?: string;\n  success?: string;\n  [key: string]: any; // This allows for additional properties\n};\n\ntype ValidatedActionFunction<S extends z.ZodType<any, any>, T> = (\n  data: z.infer<S>,\n  formData: FormData\n) => Promise<T>;\n\nexport function validatedAction<S extends z.ZodType<any, any>, T>(\n  schema: S,\n  action: ValidatedActionFunction<S, T>\n) {\n  return async (prevState: ActionState, formData: FormData): Promise<T> => {\n    const result = schema.safeParse(Object.fromEntries(formData));\n    if (!result.success) {\n      return { error: result.error.errors[0].message } as T;\n    }\n\n    return action(result.data, formData);\n  };\n}\n\ntype ValidatedActionWithUserFunction<S extends z.ZodType<any, any>, T> = (\n  data: z.infer<S>,\n  formData: FormData,\n  user: User\n) => Promise<T>;\n\nexport function validatedActionWithUser<S extends z.ZodType<any, any>, T>(\n  schema: S,\n  action: ValidatedActionWithUserFunction<S, T>\n) {\n  return async (prevState: ActionState, formData: FormData): Promise<T> => {\n    const user = await getUser();\n    if (!user) {\n      throw new Error('User is not authenticated');\n    }\n\n    const result = schema.safeParse(Object.fromEntries(formData));\n    if (!result.success) {\n      return { error: result.error.errors[0].message } as T;\n    }\n\n    return action(result.data, formData, user);\n  };\n}\n\ntype ActionWithTeamFunction<T> = (\n  formData: FormData,\n  team: TeamDataWithMembers\n) => Promise<T>;\n\nexport function withTeam<T>(action: ActionWithTeamFunction<T>) {\n  return async (formData: FormData): Promise<T> => {\n    const user = await getUser();\n    if (!user) {\n      redirect('/sign-in');\n    }\n\n    const team = await getTeamForUser(user.id);\n    if (!team) {\n      throw new Error('Team not found');\n    }\n\n    return action(formData, team);\n  };\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAaO,SAAS,gBACd,MAAS,EACT,MAAqC;IAErC,OAAO,OAAO,WAAwB;QACpC,MAAM,SAAS,OAAO,SAAS,CAAC,OAAO,WAAW,CAAC;QACnD,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,OAAO;gBAAE,OAAO,OAAO,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO;YAAC;QACjD;QAEA,OAAO,OAAO,OAAO,IAAI,EAAE;IAC7B;AACF;AAQO,SAAS,wBACd,MAAS,EACT,MAA6C;IAE7C,OAAO,OAAO,WAAwB;QACpC,MAAM,OAAO,MAAM,CAAA,GAAA,oHAAA,CAAA,UAAO,AAAD;QACzB,IAAI,CAAC,MAAM;YACT,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,SAAS,OAAO,SAAS,CAAC,OAAO,WAAW,CAAC;QACnD,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,OAAO;gBAAE,OAAO,OAAO,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO;YAAC;QACjD;QAEA,OAAO,OAAO,OAAO,IAAI,EAAE,UAAU;IACvC;AACF;AAOO,SAAS,SAAY,MAAiC;IAC3D,OAAO,OAAO;QACZ,MAAM,OAAO,MAAM,CAAA,GAAA,oHAAA,CAAA,UAAO,AAAD;QACzB,IAAI,CAAC,MAAM;YACT,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAE;QACX;QAEA,MAAM,OAAO,MAAM,CAAA,GAAA,oHAAA,CAAA,iBAAc,AAAD,EAAE,KAAK,EAAE;QACzC,IAAI,CAAC,MAAM;YACT,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,OAAO,UAAU;IAC1B;AACF"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///home/rohan/Public/bufi/app/%28login%29/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { and, eq, sql } from 'drizzle-orm';\nimport { db } from '@/lib/db/drizzle';\nimport {\n  User,\n  users,\n  teams,\n  teamMembers,\n  activityLogs,\n  type NewUser,\n  type NewTeam,\n  type NewTeamMember,\n  type NewActivityLog,\n  ActivityType,\n  invitations,\n} from '@/lib/db/schema';\nimport { comparePasswords, hashPassword, setSession } from '@/lib/auth/session';\nimport { redirect } from 'next/navigation';\nimport { cookies } from 'next/headers';\nimport { createCheckoutSession } from '@/lib/payments/stripe';\nimport { getUser, getUserWithTeam } from '@/lib/db/queries';\nimport {\n  validatedAction,\n  validatedActionWithUser,\n} from '@/lib/auth/middleware';\n\nasync function logActivity(\n  teamId: number | null | undefined,\n  userId: number,\n  type: ActivityType,\n  ipAddress?: string,\n) {\n  if (teamId === null || teamId === undefined) {\n    return;\n  }\n  const newActivity: NewActivityLog = {\n    teamId,\n    userId,\n    action: type,\n    ipAddress: ipAddress || '',\n  };\n  await db.insert(activityLogs).values(newActivity);\n}\n\nconst signInSchema = z.object({\n  email: z.string().email().min(3).max(255),\n  password: z.string().min(8).max(100),\n});\n\nexport const signIn = validatedAction(signInSchema, async (data, formData) => {\n  const { email, password } = data;\n\n  const userWithTeam = await db\n    .select({\n      user: users,\n      team: teams,\n    })\n    .from(users)\n    .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n    .leftJoin(teams, eq(teamMembers.teamId, teams.id))\n    .where(eq(users.email, email))\n    .limit(1);\n\n  if (userWithTeam.length === 0) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const { user: foundUser, team: foundTeam } = userWithTeam[0];\n\n  const isPasswordValid = await comparePasswords(\n    password,\n    foundUser.passwordHash,\n  );\n\n  if (!isPasswordValid) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  await Promise.all([\n    setSession(foundUser),\n    logActivity(foundTeam?.id, foundUser.id, ActivityType.SIGN_IN),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: foundTeam, priceId });\n  }\n\n  redirect('/dashboard');\n});\n\nconst signUpSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  inviteId: z.string().optional(),\n});\n\nexport const signUp = validatedAction(signUpSchema, async (data, formData) => {\n  const { email, password, inviteId } = data;\n\n  const existingUser = await db\n    .select()\n    .from(users)\n    .where(eq(users.email, email))\n    .limit(1);\n\n  if (existingUser.length > 0) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const passwordHash = await hashPassword(password);\n\n  const newUser: NewUser = {\n    email,\n    passwordHash,\n    role: 'owner', // Default role, will be overridden if there's an invitation\n  };\n\n  const [createdUser] = await db.insert(users).values(newUser).returning();\n\n  if (!createdUser) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  let teamId: number;\n  let userRole: string;\n  let createdTeam: typeof teams.$inferSelect | null = null;\n\n  if (inviteId) {\n    // Check if there's a valid invitation\n    const [invitation] = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.id, parseInt(inviteId)),\n          eq(invitations.email, email),\n          eq(invitations.status, 'pending'),\n        ),\n      )\n      .limit(1);\n\n    if (invitation) {\n      teamId = invitation.teamId;\n      userRole = invitation.role;\n\n      await db\n        .update(invitations)\n        .set({ status: 'accepted' })\n        .where(eq(invitations.id, invitation.id));\n\n      await logActivity(teamId, createdUser.id, ActivityType.ACCEPT_INVITATION);\n\n      [createdTeam] = await db\n        .select()\n        .from(teams)\n        .where(eq(teams.id, teamId))\n        .limit(1);\n    } else {\n      return { error: 'Invalid or expired invitation.', email, password };\n    }\n  } else {\n    // Create a new team if there's no invitation\n    const newTeam: NewTeam = {\n      name: `${email}'s Team`,\n    };\n\n    [createdTeam] = await db.insert(teams).values(newTeam).returning();\n\n    if (!createdTeam) {\n      return {\n        error: 'Failed to create team. Please try again.',\n        email,\n        password,\n      };\n    }\n\n    teamId = createdTeam.id;\n    userRole = 'owner';\n\n    await logActivity(teamId, createdUser.id, ActivityType.CREATE_TEAM);\n  }\n\n  const newTeamMember: NewTeamMember = {\n    userId: createdUser.id,\n    teamId: teamId,\n    role: userRole,\n  };\n\n  await Promise.all([\n    db.insert(teamMembers).values(newTeamMember),\n    logActivity(teamId, createdUser.id, ActivityType.SIGN_UP),\n    setSession(createdUser),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: createdTeam, priceId });\n  }\n\n  redirect('/dashboard');\n});\n\nexport async function signOut() {\n  const user = (await getUser()) as User;\n  const userWithTeam = await getUserWithTeam(user.id);\n  await logActivity(userWithTeam?.teamId, user.id, ActivityType.SIGN_OUT);\n  (await cookies()).delete('session');\n}\n\nconst updatePasswordSchema = z\n  .object({\n    currentPassword: z.string().min(8).max(100),\n    newPassword: z.string().min(8).max(100),\n    confirmPassword: z.string().min(8).max(100),\n  })\n  .refine((data) => data.newPassword === data.confirmPassword, {\n    message: \"Passwords don't match\",\n    path: ['confirmPassword'],\n  });\n\nexport const updatePassword = validatedActionWithUser(\n  updatePasswordSchema,\n  async (data, _, user) => {\n    const { currentPassword, newPassword } = data;\n\n    const isPasswordValid = await comparePasswords(\n      currentPassword,\n      user.passwordHash,\n    );\n\n    if (!isPasswordValid) {\n      return { error: 'Current password is incorrect.' };\n    }\n\n    if (currentPassword === newPassword) {\n      return {\n        error: 'New password must be different from the current password.',\n      };\n    }\n\n    const newPasswordHash = await hashPassword(newPassword);\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    await Promise.all([\n      db\n        .update(users)\n        .set({ passwordHash: newPasswordHash })\n        .where(eq(users.id, user.id)),\n      logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_PASSWORD),\n    ]);\n\n    return { success: 'Password updated successfully.' };\n  },\n);\n\nconst deleteAccountSchema = z.object({\n  password: z.string().min(8).max(100),\n});\n\nexport const deleteAccount = validatedActionWithUser(\n  deleteAccountSchema,\n  async (data, _, user) => {\n    const { password } = data;\n\n    const isPasswordValid = await comparePasswords(password, user.passwordHash);\n    if (!isPasswordValid) {\n      return { error: 'Incorrect password. Account deletion failed.' };\n    }\n\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    await logActivity(\n      userWithTeam?.teamId,\n      user.id,\n      ActivityType.DELETE_ACCOUNT,\n    );\n\n    // Soft delete\n    await db\n      .update(users)\n      .set({\n        deletedAt: sql`CURRENT_TIMESTAMP`,\n        email: sql`CONCAT(email, '-', id, '-deleted')`, // Ensure email uniqueness\n      })\n      .where(eq(users.id, user.id));\n\n    if (userWithTeam?.teamId) {\n      await db\n        .delete(teamMembers)\n        .where(\n          and(\n            eq(teamMembers.userId, user.id),\n            eq(teamMembers.teamId, userWithTeam.teamId),\n          ),\n        );\n    }\n\n    (await cookies()).delete('session');\n    redirect('/sign-in');\n  },\n);\n\nconst updateAccountSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(100),\n  email: z.string().email('Invalid email address'),\n});\n\nexport const updateAccount = validatedActionWithUser(\n  updateAccountSchema,\n  async (data, _, user) => {\n    const { name, email } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    await Promise.all([\n      db.update(users).set({ name, email }).where(eq(users.id, user.id)),\n      logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_ACCOUNT),\n    ]);\n\n    return { success: 'Account updated successfully.' };\n  },\n);\n\nconst removeTeamMemberSchema = z.object({\n  memberId: z.number(),\n});\n\nexport const removeTeamMember = validatedActionWithUser(\n  removeTeamMemberSchema,\n  async (data, _, user) => {\n    const { memberId } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    await db\n      .delete(teamMembers)\n      .where(\n        and(\n          eq(teamMembers.id, memberId),\n          eq(teamMembers.teamId, userWithTeam.teamId),\n        ),\n      );\n\n    await logActivity(\n      userWithTeam.teamId,\n      user.id,\n      ActivityType.REMOVE_TEAM_MEMBER,\n    );\n\n    return { success: 'Team member removed successfully' };\n  },\n);\n\nconst inviteTeamMemberSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  role: z.enum(['member', 'owner']),\n});\n\nexport const inviteTeamMember = validatedActionWithUser(\n  inviteTeamMemberSchema,\n  async (data, _, user) => {\n    const { email, role } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    const existingMember = await db\n      .select()\n      .from(users)\n      .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n      .where(\n        and(\n          eq(users.email, email),\n          eq(teamMembers.teamId, userWithTeam.teamId),\n        ),\n      )\n      .limit(1);\n\n    if (existingMember.length > 0) {\n      return { error: 'User is already a member of this team' };\n    }\n\n    // Check if there's an existing invitation\n    const existingInvitation = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.email, email),\n          eq(invitations.teamId, userWithTeam.teamId),\n          eq(invitations.status, 'pending'),\n        ),\n      )\n      .limit(1);\n\n    if (existingInvitation.length > 0) {\n      return { error: 'An invitation has already been sent to this email' };\n    }\n\n    // Create a new invitation\n    await db.insert(invitations).values({\n      teamId: userWithTeam.teamId,\n      email,\n      role,\n      invitedBy: user.id,\n      status: 'pending',\n    });\n\n    await logActivity(\n      userWithTeam.teamId,\n      user.id,\n      ActivityType.INVITE_TEAM_MEMBER,\n    );\n\n    // TODO: Send invitation email and include ?inviteId={id} to sign-up URL\n    // await sendInvitationEmail(email, userWithTeam.team.name, role)\n\n    return { success: 'Invitation sent successfully' };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1149, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 1164, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}